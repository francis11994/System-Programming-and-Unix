<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>CSc 352: Makefile 1</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<link href="../../style.css" rel="stylesheet" type="text/css"/>

</head>
<body bgcolor="white">
<p>
<img src="../../IMGS/uadcs.gif" alt="University of Arizona, Department of Computer Science"/>
</p>

<h1>CSc 352: Makefile 1</h1>

This problem involves creating a make file that collects together the
outputs generated by various grading scripts for an assignment 
and constructs the email messages that are sent out with scores your
programming assignments.
<p/>
<ul>
  <li>
    <b>Background:</b>
    When grading your assignments, we can run a script that grades each
    program to generate a score file for that program, and
    then collect each student's score files to create a single summary file
    that is then emailed to that student.  This problem is about the
    last step of this process, namely, collecting together the score files
    for each student to construct a summary for that student.  These scores and reports
	are for a hypothetical class/assignment so they won't match exactly the reports you'vertical-align
	been seeing in this clase, though the idea is similar. For the
    sake of simplicity, here we assume that for each student
    <b><tt>userX</tt></b>, the file <b><tt>userX.score</tt></b>
    gives the score on individual problems
    while <b><tt>userX.total</tt></b>
    gives that student's total score across all the problems.  
    <p/>
    For each student <b><tt>userX</tt></b>, 
    the files <b><tt>HDR</tt></b> (a header file), <b><tt>userX.score</tt></b>, and
    <b><tt>userX.total</tt></b> are
    concatenated together <u>in that order</u> to produce a <i>summary file</i>
    <b><tt>userX.summary</tt></b>:
    <blockquote>
      <b><tt>
	  cat HDR userX.score userX.total &gt; userX.summary
      </tt></b>
    </blockquote>
    
    The resulting file <b><tt>userX.summary</tt></b>
    is then mailed to the student.  
    For example, for <b><tt>user03</tt></b>, the command used would be
    <blockquote>
      <b><tt>
	  cat HDR user03.score user03.total &gt; user03.summary
      </tt></b>
    </blockquote>

    <p/>
    Sometimes some of the files
    <b><tt>userX.score</tt></b> and/or <b><tt>userX.total</tt></b> may
    change, e.g., because a test case had problems that were fixed, or
    maybe because the student has fixed some problems in the code to
    get partial credit.  In such cases, we need to reconstruct the summary
    file from the updated <b><tt>userX.score</tt></b> 
    and <b><tt>userX.total</tt></b> files.  We only want to reconstruct
    the summary files for those students whose scores have changed.    
    <p/>
  </li>
  <li>
    <b>Input Files:</b>
    The directory <b>/home/cs352/spring16/Assignments/assg09/makefile-problem-files</b>
    on <b>lectura</b> contains the following files, corresponding to assignment
    scores for 8 students:
    <blockquote>
        <b><tt>
	    HDR<br/>
	    user01.score &nbsp;&nbsp; user01.total<br/>
	    ...<br/>
	    user08.score &nbsp;&nbsp; user08.total
	</tt></b>
    </blockquote>
    A zip file containing these files is also available
    <a href="makefile-problem-files.zip">here</a>.  
    <p/>
  </li>
  <li>
    <b>Problem:</b>
    Create a make file named <b>Makefile</b>, in a <u>directory</u> named
    <b>makefile-problem-1</b>, that supports the following
    functionality:
    <p/>
    <blockquote>
    <dl>
      <dt><b>make all</b></dt>
      <dd>
	Concatenate the necessary files to create/update those <b><tt>userX.summary</tt></b> 
	file for which either of the following hold: (<i>i</i>) the
	summary file does not exist; or (<i>ii</i>) the summary file is older than 
	the <b><tt>score</tt></b> or <b><tt>total</tt></b> files.
	<p/>
      </dd>
      <dt><b>make clean</b></dt>
      <dd>Delete all summary files in the current directory.  Should not
	generate errors if there are no summary files to delete.  (See
	<b><tt>man rm</tt></b> for the option you need to use to suppress
	error messages if there are no files to delete.)
      </dd>
    </dl>
    </blockquote>
    <p/>
  </li>
  <li>
    <b>Assumptions:</b>
    You may assume that your make file will be put in the same directory
    as the various files mentioned under &quot;<b>Files</b>&quot; above,
    i.e., all references to files can be in the current directory.
    You may also assume that the only students in the class
    are the 8 students whose files are provided.  
    <p/>
  </li>
  <li>
    <b>Error Conditions:</b> None.  Any errors that arise will be handled
    by the <b>make</b> program.
    <p/>
  </li>
  <li>
    <b>File Submission Checklist:</b>
    <ul>
      <li>File is named <b>Makefile</b>.</li>
      <li>The make file assumes that the input files (<b><tt>HDR</tt></b>,
	<b><tt>*.score</tt></b> and
	<b><tt>*.TOTAL</tt></b>) are in the same directory.  It puts the
	summary files in the same directory.</li>
      <li>The files are submitted in a <u>directory</u> named 
	<b>makefile-problem-1</b>.</li>
    </ul>
    <p/>
  </li>
  <li>
    <b>Grading:</b>
    I would prefer to see a solution that has a single general rule that works
    for the general case regardless of how many students there are.  It's OK
    to put the list of names of the 8 students for this particular class into a
    macro, e.g., something like:

    <blockquote>
	<b><tt>STUDENTS = user01 user02 ... user08</tt></b><br/>
	...<br/>
	<i>A rule for create summary files using the</i> 
	   <b><tt>STUDENTS</tt></b> macro<br/>
	<i>A rule for</i> <b>clean</b>
    </blockquote>

    I will accept a solution that has a separate rule for each student, but
    such solutions will get 60% of the score.  
    <p/>
  </li>
  <li>
    <b>Other Comments:</b> For testing your makefile, it can be useful to
    be able to change the &quot;last-modified&quot; time on a file.  The
    command <b><tt>touch</tt></b> will do this.  See <b><tt>man touch</tt></b>
    for details.
  </li>
</ul>
</body>
</html>
